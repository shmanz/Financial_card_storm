# 🎮 PVP 패배 후 역전 시스템 (신한은행 특화)

## ✅ 완성된 기능

### 1. PVP 패배 시 오픈뱅킹 시스템
- ✅ PVP 전투 패배 → 오픈뱅킹 팝업 자동 표시
- ✅ 신한은행 추가 상품으로 역전의 기회 제공
- ✅ 밸런스 잡힌 히든 카드 획득

### 2. 신한은행 특화 옵션 4가지
- 🏦 타행 IRP → 신한은행 이전
- 🔄 자동 정기결제 → 신한은행 변경
- 💰 추가 신한은행 상품 가입
- 🏠 청약상품 → 신한은행 이전

### 3. 밸런스 조정된 히든 카드
- 🏦 신한 금융의 힘
- 코스트: 4 | 공격: 8 | 방어: 3
- 효과: 8 피해 + 5 회복 + 3 실드 + 다음 턴 에너지 +2

---

## 🎯 PVP 패배 플로우

### 시나리오: A vs B 대전

```
플레이어 A (패배)
  ↓
HP 0 도달
  ↓
게임 종료 모달 표시
  ↓
😢 패배
"더 강해져서 돌아오세요"
  ↓
🏦 신한은행 추가 상품으로 역전하기 (버튼)
  ↓
오픈뱅킹 팝업 표시
```

---

## 🏦 오픈뱅킹 옵션 상세

### 옵션 1: 타행 IRP → 신한은행 이전

**설명**:
```
타 은행의 개인형 퇴직연금을 
신한은행으로 이전합니다
```

**혜택**:
- 잔액 1천만원
- 우대 금리 6.8%

**추가 거래**:
```json
{
  "type": "INVESTMENT",
  "name": "신한 IRP (타행 이전)",
  "provider": "신한은행",
  "balance": 10_000_000,
  "returnRate": 6.8
}
```

---

### 옵션 2: 자동 정기결제 → 신한은행 변경

**설명**:
```
각종 자동이체/정기결제를 
신한은행 계좌로 변경합니다
```

**혜택**:
- 월 100만원 자동이체

**추가 거래**:
```json
{
  "type": "DEPOSIT",
  "name": "신한 자동이체 통장",
  "provider": "신한은행",
  "balance": 3_000_000
}
```

---

### 옵션 3: 추가 신한은행 상품 가입

**설명**:
```
신한 주택청약종합저축 또는 
연금저축 가입
```

**혜택**:
- 청약 100만원
- 연금 500만원

**추가 거래** (2개):
```json
[
  {
    "type": "SAVINGS",
    "name": "신한 주택청약종합저축",
    "provider": "신한은행",
    "balance": 1_000_000,
    "monthlyPayment": 100_000
  },
  {
    "type": "INVESTMENT",
    "name": "신한 연금저축",
    "provider": "신한은행",
    "balance": 5_000_000,
    "returnRate": 5.5
  }
]
```

---

### 옵션 4: 청약상품 → 신한은행 이전

**설명**:
```
타 은행의 청약통장을 
신한은행으로 이전합니다
```

**혜택**:
- 청약 횟수 유지
- 우대 금리

**추가 거래**:
```json
{
  "type": "SAVINGS",
  "name": "신한 청약통장 (타행 이전)",
  "provider": "신한은행",
  "balance": 2_000_000,
  "monthlyPayment": 100_000
}
```

---

## 💎 히든 카드: 신한 금융의 힘

### 카드 정보

| 속성 | 값 |
|------|------|
| 이름 | 🏦 신한 금융의 힘 |
| 희귀도 | LEGENDARY |
| 코스트 | 4 |
| 공격력 | 8 |
| 방어력 | 3 |

### 효과

```
신한은행 통합 금융의 힘!

1. 상대에게 8 피해
2. 내 체력 5 회복
3. 방어막 3 생성
4. 다음 턴 에너지 +2
```

### 밸런스 분석

**총 가치**:
- 피해: 8 (코스트 4 상당)
- 회복: 5 (코스트 2.5 상당)
- 실드: 3 (코스트 1.5 상당)
- 에너지: 2 (코스트 2 상당)
- **총합: 코스트 10 상당** → 코스트 4에 사용 가능!

**강력하지만 밸런스 유지**:
- ✅ 즉시 게임을 뒤집을 정도는 아님
- ✅ 역전의 발판 제공
- ✅ 전략적 사용 필요

---

## 🎮 테스트 시나리오

### 1. PVP 패배 후 오픈뱅킹

**창 1: 플레이어 A (염승훈)**
```
로그인 → 방 생성 → 준비 완료
  ↓
PVP 전투
  ↓
패배 (HP 0)
  ↓
게임 종료 모달:
  😢 패배
  더 강해져서 돌아오세요
  
  [🏦 신한은행 추가 상품으로 역전하기]
  💎 히든 카드를 받고 다시 도전하세요!
  
  [로비로]
```

**창 2: 플레이어 B (이태영)**
```
로그인 → 방 참가 → 준비 완료
  ↓
PVP 전투
  ↓
승리!
  ↓
게임 종료 모달:
  🎉 승리!
  상대를 물리쳤습니다!
  
  [로비로]
```

---

### 2. 오픈뱅킹 선택

**플레이어 A가 "신한은행 추가 상품" 클릭**:

```
STEP 1: 옵션 선택
  ┌─────────────────────────────────┐
  │ 🏦 신한은행과 함께 더 강해지세요! │
  │ 추가 금융 상품으로 히든 카드 획득 │
  └─────────────────────────────────┘
  
  ⭕ 타행 IRP → 신한은행 이전
     잔액 1천만원 + 우대 금리
  
  ⭕ 자동 정기결제 → 신한은행 변경
     월 100만원 자동이체
  
  ⭕ 추가 신한은행 상품 가입 (선택!)
     청약 100만원 + 연금 500만원
  
  ⭕ 청약상품 → 신한은행 이전
     청약 횟수 유지 + 우대
  
  [연동하기]
```

---

### 3. 히든 카드 획득

```
STEP 2: 완료
  ┌─────────────────────────────────┐
  │    🎉 연동 완료!                 │
  │                                  │
  │  🏦 신한 금융의 힘 (HIDDEN)      │
  │  코스트: 4 | 공격: 8 | 방어: 3   │
  │                                  │
  │  신한은행 통합 금융의 힘을 발휘  │
  │  • 상대에게 8 피해               │
  │  • 내 체력 5 회복                │
  │  • 방어막 3 생성                 │
  │  • 다음 턴 에너지 +2             │
  │                                  │
  │  💎 밸런스 잡힌 역전의 카드      │
  └─────────────────────────────────┘
  
  [게임 시작]
```

---

### 4. 재도전

**플레이어 A**:
```
로비
  ↓
다시 방 생성 or 참가
  ↓
PVP 전투
  ↓
손패에 "🏦 신한 금융의 힘" 포함!
  ↓
코스트 4로 사용:
  - 상대 HP -8
  - 내 HP +5
  - 내 실드 +3
  - 다음 턴 에너지 +2
  ↓
역전 승리! 🎉
```

---

## 📋 체크리스트

### PVP 패배 시

- [ ] 게임 종료 모달 표시
- [ ] "😢 패배" 메시지
- [ ] 히든 카드 없을 때: "신한은행 추가 상품" 버튼 표시
- [ ] 히든 카드 있을 때: "이미 보유" 메시지

### 오픈뱅킹 팝업

- [ ] 신한은행 특화 옵션 4가지
- [ ] 각 옵션별 상세 설명
- [ ] 혜택 표시

### 히든 카드 획득

- [ ] "신한 금융의 힘" 카드 생성
- [ ] 덱에 자동 추가
- [ ] 다음 게임부터 사용 가능

### 재도전

- [ ] 히든 카드가 손패에 나타남
- [ ] 코스트 4로 사용 가능
- [ ] 효과 정상 작동 (8 피해 + 5 회복 + 3 실드 + 에너지 +2)

---

## 🎊 완료!

**PVP 패배 후 역전 시스템이 완성되었습니다!**

### 주요 특징

1. ✅ **PVP 전용** - 패배 시에만 표시
2. ✅ **신한은행 특화** - 4가지 실제 금융 상품
3. ✅ **밸런스 유지** - 강력하지만 무적은 아님
4. ✅ **전략적 깊이** - 히든 카드 사용 타이밍 중요

---

## 🚀 테스트 시작!

```
http://localhost:5173
```

### 테스트 순서

1. **창 2개 준비**
2. **창 1**: 염승훈 로그인 → 방 생성
3. **창 2**: 이태영 로그인 → 방 참가
4. **PVP 전투** → 한 쪽 패배
5. **패배한 쪽**: "신한은행 추가 상품" 클릭
6. **오픈뱅킹**: 옵션 선택 → 연동
7. **히든 카드 획득**: "신한 금융의 힘"
8. **재도전**: 히든 카드 사용 → 역전 승리!

---

**지금 바로 PVP 패배를 역전의 기회로 만들어보세요!** 🏦💎⚔️





