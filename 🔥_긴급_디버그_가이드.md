# 🔥 긴급 디버그 가이드

## 🎯 문제 상황

**"양쪽 다 공격카드 사용해도 HP/방어막이 감소하지 않음"**

---

## ✅ 초대량 디버그 로그 추가 완료!

이제 **모든 단계에서 로그가 출력**됩니다.

---

## 🚀 서버 실행 완료!

브라우저 접속:
```
http://localhost:5173
```

---

## 🔍 필수! 디버그 테스트

### STEP 1: 싱글 플레이 먼저 테스트

```
1. http://localhost:5173
2. F12 → Console 탭 열기 ⭐ 필수!
3. Guest로 시작
4. 싱글 플레이
5. 손패에서 아무 카드나 클릭
```

### STEP 2: 콘솔 로그 확인

**다음 로그가 나와야 합니다**:

```
========================================
[리듀서] PLAY_CARD 액션 시작
[리듀서] isPlayerTurn: true
[리듀서] isGameOver: false
[리듀서] 사용할 카드: 야식 폭식 ⚔️ 2 🛡️ 0
[리듀서] 현재 에너지: 3 / 카드 코스트: 2
[리듀서] 에너지 차감: 3 → 1
[리듀서] 손패: 4 → 3
[리듀서] 피해 처리 시작 - card.attack: 2
[리듀서] 현재 보스/상대 HP: 20
[리듀서] 현재 보스/상대 실드: 0
[리듀서] 피해 계산:
[리듀서]   - 카드 피해: 2
[리듀서]   - 실드로 막음: 0
[리듀서]   - 실제 HP 피해: 2
[리듀서]   - 보스 HP: 20 → 18
[리듀서]   - 보스 실드: 0 → 0
[리듀서] 추가 효과 적용: 1 개
[리듀서] 최종 보스 HP: 18
[리듀서] PLAY_CARD 완료, 새 상태 반환
========================================
```

### STEP 3: 화면 확인

- 보스 HP 바: 20/20 → 18/20
- 숫자 변경 확인
- 로그: "2 피해를 입혔습니다. (HP: 20 → 18)"

---

## 🚨 로그가 안 나온다면?

### 확인 1: F12가 제대로 열렸나?

- Console 탭 선택
- 필터: All levels (Verbose 포함)

### 확인 2: 카드가 실제로 클릭되나?

콘솔에 아무것도 안 나오면:

```javascript
// 콘솔에 직접 입력
console.log('테스트');
```

"테스트"가 나오면 콘솔은 정상.

### 확인 3: React 에러 체크

Console 탭에서 빨간색 에러 있는지 확인.

---

## 🔥 로그 종류별 의미

### 정상 로그 (싱글 플레이)

```
[리듀서] PLAY_CARD 액션 시작
  → 리듀서가 호출됨 ✅

[리듀서] 사용할 카드: ... ⚔️ 2
  → 카드 찾기 성공 ✅

[리듀서] 피해 처리 시작
  → 피해 계산 시작 ✅

[리듀서] 보스 HP: 20 → 18
  → HP 감소! ✅

[리듀서] PLAY_CARD 완료
  → 상태 업데이트 완료 ✅
```

### 문제 로그 (만약 발생)

```
[리듀서] 카드를 찾을 수 없음
  → 카드 ID 문제 ❌

[리듀서] 에너지 부족!
  → 코스트 > 현재 에너지 ❌

[리듀서] 카드 사용 불가
  → 턴 아님 또는 게임 종료 ❌
```

---

## 🎯 PvP 테스트 (싱글이 정상이면)

### STEP 1: 양쪽 준비

**일반 창**:
```
1. 로그인: 염승훈
2. F12 → Console
3. 멀티플레이 → 방 생성
```

**시크릿 모드**:
```
1. Ctrl + Shift + N
2. 로그인: 이태영
3. F12 → Console
4. 방 참가
```

### STEP 2: 게임 시작

- 준비 완료 → 자동 시작
- 양쪽 콘솔에 로그 확인

### STEP 3: 선공 공격

**선공 콘솔**:
```
[리듀서] PLAY_CARD 액션 시작
...
[리듀서] 보스 HP: 20 → 18
[Socket] ✅ game:playCard 전송 완료! damage: 2
```

**후공 콘솔**:
```
[PvP] ✅ game:cardPlayed 이벤트 수신!
[PvP] damage: 2
[App] 🔥 onReceiveDamage 콜백 호출됨!
[리듀서] 🔥 RECEIVE_PVP_DAMAGE 액션 실행!
[리듀서] 새로운 HP: 20 → 18
```

### STEP 4: 후공 공격

**후공 콘솔**:
```
[리듀서] PLAY_CARD 액션 시작
...
[Socket] ✅ game:playCard 전송 완료! damage: 3
```

**선공 콘솔** (핵심!):
```
[PvP] ✅ game:cardPlayed 이벤트 수신!
[PvP] damage: 3
[리듀서] 🔥 RECEIVE_PVP_DAMAGE 액션 실행!
[리듀서] 새로운 HP: 20 → 17
```

---

## 📋 체크리스트

### 기본

- [x] 서버 실행 (`npm run dev:full`)
- [ ] 브라우저 접속
- [ ] F12 → Console 열기

### 싱글 플레이

- [ ] Guest로 시작
- [ ] 카드 클릭
- [ ] 콘솔: "[리듀서] PLAY_CARD 액션 시작"
- [ ] 콘솔: "[리듀서] 보스 HP: 20 → X"
- [ ] 화면: 보스 HP 바 감소

### PvP

- [ ] 양쪽 F12 콘솔
- [ ] 선공 공격 → 후공 콘솔 로그
- [ ] 후공 공격 → 선공 콘솔 로그
- [ ] 양쪽 HP 바 감소

---

## 🆘 문제별 해결

### "로그가 아예 안 나와요"

**원인**: 리듀서가 호출되지 않음

**해결**:
1. 새로고침 (F5)
2. Guest 재로그인
3. 서버 재시작

### "카드 클릭이 안 돼요"

**확인**:
```javascript
// 콘솔에서 실행
console.log('손패:', gameState?.hand);
```

### "HP는 줄어드는데 화면은 안 변해요"

**원인**: React 렌더링 문제

**해결**:
- 새로고침 (F5)
- 브라우저 캐시 삭제

---

## 💡 캡처해서 공유하기

### 싱글 플레이가 안 되면

F12 콘솔 전체 캡처:
```
카드 클릭 후 나오는 모든 로그
```

### PvP가 안 되면

양쪽 콘솔 모두 캡처:
```
선공: 카드 사용 시 로그
후공: 이벤트 수신 시 로그
```

---

## 🎊 성공 기준

### 싱글 플레이

```
[리듀서] 보스 HP: 20 → 18
```

이 로그가 나오면 **성공!** ✅

### PvP

```
선공 콘솔: [Socket] ✅ game:playCard 전송 완료!
후공 콘솔: [PvP] ✅ game:cardPlayed 이벤트 수신!
후공 콘솔: [리듀서] 새로운 HP: 20 → 18
```

모두 나오면 **성공!** ✅

---

## 🚀 지금 테스트!

```
http://localhost:5173
```

**F12 콘솔을 열고 로그를 보면서 테스트하세요!**

모든 단계가 로그로 출력됩니다! 📊

---

**문제가 지속되면 콘솔 로그 전체를 캡처해서 알려주세요!** 🔍





