# 🎊 최종 완성 가이드 (v3.0 Complete)

## ✅ 모든 문제 해결 완료!

1. ✅ **파란 화면 문제** → Guest 모드 추가
2. ✅ **PvP 보스 AI 제거** → 플레이어 vs 플레이어만
3. ✅ **실시간 동기화** → Socket.IO 완벽 구현
4. ✅ **7명 인물 DB** → 각자 다른 거래 패턴
5. ✅ **오픈뱅킹 + 히든 카드** → 역전승 시스템

---

## 🚀 한 번에 실행하기

```powershell
# 1. 기존 프로세스 정리
taskkill /IM node.exe /F

# 2. 잠시 대기
Start-Sleep -Seconds 2

# 3. 실행
npm run dev:full

# 4. 브라우저 자동 열기 (선택)
start http://localhost:5173
```

또는 **간단하게**:

```powershell
.\start.ps1
```

---

## 🎮 완전한 플레이 가이드

### 시작 방법 (3가지)

#### 1️⃣ Guest 모드 (즉시 체험)

```
로그인 화면
↓
"🎮 Guest로 시작하기" 클릭
↓
메인 화면 (노란색 디버그 박스 표시)
↓
"싱글 플레이 시작" 클릭
↓
전투 시작! ✅
```

#### 2️⃣ 기존 회원 로그인

```
이름: 염승훈, 이태영, 좌상목, 서재만, 강승완, 배형준, 임지훈
비밀번호: password123
↓
로그인
↓
개인 맞춤 거래 패턴으로 플레이
```

#### 3️⃣ 신규 회원가입

```
"신규 고객입니다" 클릭
↓
이름 입력 (없는 이름)
↓
계좌개설 팝업
  - 은행 선택
  - 카드 선택
  - 적금 설정
↓
3종 상품 동시 개설
↓
게임 시작
```

---

## 🎯 싱글 플레이 완전 가이드

### STEP 1: 게임 시작

```
메인 화면 → "싱글 플레이 시작"
```

### STEP 2: 전투 화면 구성

```
┌─────────────────────────────────────┐
│  소비 패턴 보스  HP: 20/20         │ ← AI 보스
├─────────────────────────────────────┤
│  [전장]      │  에너지 바 ⚡      │
│  [로그]      │  3/3               │
│              │  [턴 종료]         │
├─────────────────────────────────────┤
│  나  HP: 20/20                      │
│  [카드1] [카드2] [카드3]          │
└─────────────────────────────────────┘
```

### STEP 3: 카드 사용

- 손패 카드 클릭 (에너지 충분한 것만)
- 효과 발동:
  - 💚 HEAL → 내 체력 회복
  - 🛡️ SHIELD → 방어막 생성
  - 🗡️ DAMAGE → 보스 HP 감소
  - 😵 STUN → 보스 다음 턴 공격 안 함

### STEP 4: 턴 종료

- "턴 종료" 버튼 클릭
- **보스가 2 피해 공격** (싱글 플레이만!)
- 내 HP 감소
- 다음 턴 시작:
  - 에너지 +1
  - 카드 1장 드로우

### STEP 5: 승리 또는 패배

**승리 조건**: 보스 HP 0
```
🎉 승리!
↓
[다시 시작] [메인 화면]
```

**패배 조건**: 내 HP 0
```
😢 패배
↓
[🏦 오픈뱅킹 연동하고 역전하기] ← NEW!
[다시 시작] [메인 화면]
```

---

## ⚔️ PvP 멀티플레이 완전 가이드

### STEP 1: 방 생성

**플레이어 A (일반 창)**:

```
메인 화면
↓
"멀티플레이 (PvP)" 클릭
↓
🟢 "서버 연결됨" 확인
↓
닉네임: 플레이어A
방 이름: 테스트방
↓
"방 생성" 클릭
↓
대기실 진입
```

### STEP 2: 방 참가

**플레이어 B (시크릿 모드)**:

```
Ctrl + Shift + N (시크릿 모드)
↓
http://localhost:5173
↓
다른 계정 로그인 (예: 이태영)
↓
멀티플레이 클릭
↓
"테스트방" → "참가하기"
↓
대기실 진입
```

### STEP 3: 게임 시작

```
플레이어 A: "준비 완료" 클릭
플레이어 B: "준비 완료" 클릭
↓
자동으로 전투 화면 전환! ✅
```

### STEP 4: PvP 전투

```
┌─────────────────────────────────────┐
│  상대 플레이어  HP: 20/20          │ ← 플레이어 B
│  디버그: 내 턴 = YES | 모드 = PVP │
├─────────────────────────────────────┤
│  [전장: ⚔️ 당신의 턴!]            │
│  [로그: PvP 대전 시작...]         │
├─────────────────────────────────────┤
│  나 (플레이어A)  HP: 20/20         │
│  [카드1] [카드2] [카드3]          │
└─────────────────────────────────────┘
```

**플레이어 A 차례**:

```
1. 카드 사용 (예: 3 피해)
   ↓
2. 플레이어 B 화면에 HP 감소 표시
   ↓
3. "턴 종료" 클릭
   ↓
4. 보스 공격 없음! ✅
   ↓
5. 플레이어 B에게 턴 넘김
```

**플레이어 B 차례**:

```
1. "⚔️ 내 턴!" 표시
   ↓
2. 에너지 회복 (1→2)
   ↓
3. 카드 1장 드로우
   ↓
4. 카드 사용
   ↓
5. 플레이어 A HP 감소
   ↓
6. "턴 종료"
   ↓
7. 보스 공격 없음! ✅
   ↓
8. 다시 플레이어 A 턴
```

### STEP 5: 승패

- 상대 HP 0 → 내가 승리 🎉
- 내 HP 0 → 패배 😢

---

## 💎 오픈뱅킹 히든 카드

### 획득 조건

**싱글 플레이 전용** (PvP에서는 안 나옴):

```
보스에게 패배
↓
"🏦 오픈뱅킹 연동하고 역전하기" 버튼 표시
↓
클릭
↓
4가지 옵션 선택:
  1. 💼 IRP 퇴직연금 (1천만원)
  2. 💰 고금리 적금 (월 50만원)
  3. 💳 프리미엄 카드 (한도 1천만원)
  4. 🔄 자동이체 변경 (300만원)
↓
연동 진행 (2초)
↓
💎 "금융의 신" 히든 카드 획득!
```

### 히든 카드 스탯

```
💎 금융의 신 (LEGENDARY)
─────────────────────
코스트: 5
공격력: 15

효과:
• 상대에게 15 피해
• 내 체력 10 회복
• 다음 턴 에너지 최대 (10)

제한: 게임당 1회
─────────────────────
```

---

## 🎯 주요 차이점

### 싱글 플레이 vs PvP

| 항목 | 싱글 플레이 | PvP |
|------|-------------|-----|
| 적 | AI 보스 | 상대 플레이어 |
| 턴 종료 시 | 보스 공격 (2 피해) | 상대 턴으로 넘김 (공격 없음) |
| 승리 조건 | 보스 HP 0 | 상대 플레이어 HP 0 |
| 패배 시 | 오픈뱅킹 팝업 | 결과 모달만 |
| 실시간 동기화 | 없음 | Socket.IO 동기화 |

---

## 📋 최종 체크리스트

### 기본 실행

- [ ] `taskkill /IM node.exe /F` 실행
- [ ] `npm run dev:full` 실행
- [ ] 프론트엔드: `http://localhost:5173` 접속
- [ ] 백엔드: `http://localhost:3002/api/health` 확인

### 싱글 플레이

- [ ] Guest 또는 로그인
- [ ] 메인 화면 표시 (노란색 디버그 박스)
- [ ] "싱글 플레이 시작" 클릭
- [ ] 전투 화면 표시 (보스 + 손패)
- [ ] 카드 사용 → 보스 HP 감소
- [ ] 턴 종료 → **보스가 공격** (2 피해)
- [ ] 내 HP 감소 확인

### PvP 멀티플레이

- [ ] 회원 로그인 (Guest는 불가)
- [ ] 멀티플레이 → 🟢 서버 연결됨
- [ ] 방 생성
- [ ] 시크릿 모드 → 방 참가
- [ ] 준비 완료 → 게임 시작
- [ ] 전투 화면 (디버그: 모드 = PVP)
- [ ] A 카드 사용 → B HP 감소
- [ ] A 턴 종료 → **A는 공격받지 않음!** ✅
- [ ] B의 턴으로 전환
- [ ] B 카드 사용 → A HP 감소
- [ ] B 턴 종료 → **B는 공격받지 않음!** ✅

### 오픈뱅킹

- [ ] 싱글 플레이에서 패배
- [ ] 오픈뱅킹 버튼 표시
- [ ] 타 은행 상품 선택
- [ ] 히든 카드 획득
- [ ] 덱에 추가 확인

---

## 🔍 디버그 정보 확인

### 메인 화면

```
디버그: 현재 화면 = MAIN | 사용자 = Guest | 거래 = 200건 | 카드 = 25장 | 덱 = 25장
```

### PvP 전투 화면

```
PvP 디버그: 내 턴 = YES | 턴 #1 | 모드 = PVP
```

이 정보가 보이면 **정상 작동 중**입니다! ✅

---

## 📂 완성된 파일 구조

```
src/
├── data/
│   ├── cardAbilities.ts         # 50종 카드 능력
│   └── mockUsers.ts             # 7명 인물 + 거래 데이터
├── contexts/
│   └── AuthContext.tsx          # 인증 (Guest 포함)
├── components/
│   ├── LoginScreen.tsx          # 로그인 (Guest 버튼)
│   ├── NewAccountPopup.tsx      # 계좌개설 (3종 동시)
│   ├── PvPBattle.tsx            # PvP 전투 (보스 제거)
│   ├── OpenBankingPopup.tsx     # 오픈뱅킹 + 히든 카드
│   ├── MultiplayerLobby.tsx     # PvP 로비
│   ├── CardView.tsx             # 카드 UI
│   ├── HeroPanel.tsx            # HP/실드/상태 효과
│   ├── HandArea.tsx             # 손패
│   ├── EnergyBar.tsx            # 에너지
│   ├── GameLog.tsx              # 로그
│   └── TransactionPreview.tsx   # 거래 내역
├── hooks/
│   └── useSocket.ts             # Socket.IO 연결
├── gameState.ts                 # 게임 로직 (모드 분리)
└── App.tsx                      # 메인 앱

server/
└── index.js                     # Socket.IO 서버

문서/
├── README.md                    # 프로젝트 설명
├── START_GAME.md                # 빠른 시작
├── GUEST_MODE_GUIDE.md          # Guest 모드 가이드
├── PVP_TEST_GUIDE.md            # PvP 테스트 방법
├── PVP_LOGIC_FIX.md             # PvP 로직 수정 내역
├── TROUBLESHOOTING.md           # 문제 해결
├── CUSTOM_CARD_IMAGES.md        # 이미지 커스터마이징
└── COMPLETE_GUIDE.md            # 이 파일
```

---

## 🎊 구현된 전체 기능

### 계정 & 인증

- [x] Guest 모드 (로그인 없이 체험)
- [x] 7명 실제 인물 로그인
- [x] 신규 회원가입
- [x] 3종 상품 동시 개설 (계좌+카드+적금)
- [x] 로그아웃/계정 전환
- [x] LocalStorage 세션 관리

### 카드 시스템

- [x] 50종 카드 능력 데이터베이스
- [x] 20가지 효과 타입
- [x] 카테고리별 색상 테마
- [x] 희귀도 시스템 (COMMON~LEGENDARY)
- [x] 거래 패턴 기반 자동 생성
- [x] 히든 카드 시스템

### 전투 시스템

- [x] 싱글 플레이 (AI 보스)
- [x] PvP 멀티플레이
- [x] 턴제 전투
- [x] 버프/디버프/상태 효과
- [x] 방어막 시스템
- [x] 에너지 관리
- [x] 승패 조건

### 멀티플레이

- [x] Socket.IO 백엔드 서버
- [x] 방 생성/참가/목록
- [x] 실시간 턴 동기화
- [x] 상태 브로드캐스트
- [x] **보스 AI 완전 제거** (PvP 전용)
- [x] 플레이어 vs 플레이어만

### 오픈뱅킹

- [x] 타 은행 상품 연동 시뮬레이션
- [x] 4가지 연동 옵션
- [x] 히든 카드 획득
- [x] 역전승 시스템
- [x] 패배 시에만 표시

### UI/UX

- [x] Framer Motion 애니메이션
- [x] 카테고리별 색상 테마
- [x] 상태 효과 아이콘
- [x] 실시간 HP/실드 표시
- [x] 디버그 정보 표시
- [x] 반응형 디자인

---

## 🎮 모드별 특징 요약

### Guest 모드

```
✅ 로그인 불필요
✅ 즉시 플레이
✅ 200개 랜덤 거래
✅ 싱글 플레이 완전 지원
✅ 오픈뱅킹 가능
✅ 히든 카드 획득 가능
❌ PvP 불가
```

### 회원 모드

```
✅ 7명 중 선택
✅ 개인별 맞춤 거래 패턴
✅ 싱글 플레이
✅ PvP 멀티플레이
✅ 데이터 영구 저장
✅ 모든 기능 이용 가능
```

### 싱글 플레이

```
✅ AI 보스와 대전
✅ 턴 종료 시 보스 공격
✅ 패배 시 오픈뱅킹
✅ 히든 카드 획득
✅ 무제한 재시작
```

### PvP 멀티플레이

```
✅ 플레이어 vs 플레이어
✅ 보스 AI 없음
✅ 실시간 동기화
✅ 턴제 전투
✅ 상대 상태 확인
❌ 오픈뱅킹 없음
```

---

## 🆘 FAQ

### Q: 파란 화면만 나와요!

**A**: Guest로 시작하기 버튼을 클릭하세요!
- 로그인 화면에서 하단의 점선 버튼
- "🎮 Guest로 시작하기"

### Q: 싱글 플레이 화면이 안 나와요!

**A**: 디버그 정보를 확인하세요
- 노란색 박스에 "카드 = 0장"이면 문제
- 새로고침 (Ctrl + R)
- Guest 재로그인

### Q: PvP에서 턴 종료 시 내가 공격받아요!

**A**: ✅ 이제 해결됨!
- PvP 모드에서는 보스 공격 제거됨
- 디버그 정보에서 "모드 = PVP" 확인

### Q: Guest로 PvP 못 하나요?

**A**: 회원만 가능합니다
- PvP 클릭 시 로그인 유도 모달 표시
- "회원가입하기" 클릭 후 이용

---

## 🎯 빠른 테스트 시나리오

### 시나리오 1: 5분 체험

```
1. Guest로 시작 (0초)
2. 싱글 플레이 (2분)
3. 패배 → 오픈뱅킹 (1분)
4. 히든 카드로 역전승 (2분)
✅ 완료!
```

### 시나리오 2: PvP 테스트

```
1. 로그인: 염승훈 (0초)
2. 방 생성 (10초)
3. 시크릿 모드: 이태영 (10초)
4. 방 참가 → 준비 (10초)
5. 실시간 대전 (5분)
✅ 완료!
```

---

## 🎊 최종 완성!

**모든 기능이 정상 작동합니다!**

```powershell
taskkill /IM node.exe /F
npm run dev:full
```

브라우저: `http://localhost:5173`

---

**지금 바로 플레이하세요!** 🎮⚔️💳💎✨





