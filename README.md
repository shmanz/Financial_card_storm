# Financial Card Storm ⚔️💳

**은행 거래 데이터 기반 PvP 카드 배틀 게임**

---

## 🚀 한 줄로 시작

```powershell
npm run dev:full
```

브라우저: `http://localhost:5173`

---

## 🎮 게임 소개

### 핵심 기능

- ✅ **Guest 모드** - 로그인 없이 즉시 체험
- ✅ **7명 실제 인물** - 각자 다른 거래 패턴
- ✅ **50종 카드 능력** - 다양한 전략
- ✅ **PvP 실시간 대전** - 친구와 1:1 대결
- ✅ **오픈뱅킹 히든 카드** - 역전승 시스템
- ✅ **라운드 기반 에너지** - 공평한 턴제
- ✅ **신한금융 계좌 현황** - 신한금융그룹 중심 관리 + 오픈뱅킹 분리
- ✅ **카드 덱 관리** - 30장 커스텀 덱 구성
- 🆕 **카드 상점** - 추가 거래로 특별 카드 획득! (NEW!)

---

## 🎯 새로운 기능 가이드 (v8.0)

### 🏦 계좌 현황 보기 (신한금융 중심)

1. 로비에서 **"계좌 현황"** 카드 클릭
2. **신한금융그룹 거래 상품** 섹션 확인
   - 신한은행, 신한카드, 신한투자증권, 신한생명 상품 우선 표시
   - 타입별 상세 정보 (예금/카드/적금/보험/IRP)
3. **오픈뱅킹 연동 상품** 섹션 확인
   - 타 금융사 상품 별도 관리
   - 통합 자산 현황
4. 총 보유 자산 및 금융사별 잔액 확인

### 🛒 카드 상점 (추가 거래로 카드 획득)

1. 로비에서 **"카드 상점"** 카드 클릭
2. 상품 카테고리 필터 선택 (전체/신한금융/투자/저축/보험/대출)
3. 원하는 상품 클릭하여 상세 정보 확인
4. **구매 조건 확인**
   - 🔒 신한금융그룹 전용 상품 여부
   - 💰 필요 금액
   - 🎴 획득할 수 있는 카드 미리보기
5. **"구매하기"** 버튼으로 거래 진행
6. 획득한 카드는 자동으로 덱에 추가!

**💡 Tip:**
- 각 상품은 1회만 구매 가능
- 신한금융그룹 상품 보유 시 더 많은 상품 이용 가능
- 구매한 카드는 즉시 전투에서 사용 가능
- IRP, 청약저축 등 실제 금융상품과 연계된 카드 획득

**🎁 추천 구매 순서:**
1. 신한카드 발급 (무료) → 💳 캐시백 리워드
2. IRP 추가납입 (100만원) → 💰 세제혜택
3. 청약저축 납입 (50만원) → 🏘️ 아파트 구매

### 🎴 카드 덱 관리 (30장 제한)

1. 로비에서 **"카드 덱 관리"** 카드 클릭
2. 보유 카드 목록에서 원하는 카드 선택 (클릭)
   - 기본 카드 + 상점 구매 카드 모두 표시
3. **최소 10장 ~ 최대 30장** 선택
4. 카테고리 필터/정렬로 원하는 카드 찾기
5. 더블클릭으로 카드 상세 정보 확인
6. **"덱 적용"** 버튼으로 저장
7. 싱글 플레이 & PvP에서 선택한 덱 사용!

**💡 Tip:**
- 30장을 모두 선택하면 추가 선택 불가
- "덱이 가득함" 표시된 카드는 클릭 불가
- 전략에 맞게 코스트 밸런스 조정 추천
- 상점 구매 카드를 활용하여 강력한 덱 구성

---

## 🎯 빠른 시작

### Guest 모드 (30초)

```
http://localhost:5173
↓
"🎮 Guest로 시작하기" 클릭
↓
바로 게임 시작! ✅
```

### PvP 대전 (2분)

```
창 1: 염승훈 로그인 → 방 생성 (닉네임: 플레이어A)
창 2: 이태영 로그인 → 방 참가 (닉네임: 플레이어B)
↓
준비 완료 (양쪽)
↓
실시간 대전! ⚔️
```

---

## 📖 주요 수정 사항 (v7.0)

### 🎊 로비 시스템 개편 (NEW!)
- **💼 계좌 현황 화면**
  - 신한은행 거래 상품 실시간 표시
  - 예금, 적금, 카드, 보험, 투자/IRP 통합 관리
  - 총 자산 현황 및 상품별 상세 정보
  - 신한은행 특화 섹션 (신한 상품만 별도 표시)
  
- **🎴 카드 덱 관리 화면**
  - 보유 카드 전체 목록 확인
  - 카테고리별 필터링 (음식, 카페, 쇼핑 등)
  - 비용/공격력/이름순 정렬 기능
  - 전투 덱 자유롭게 구성 (10~50장)
  - 카드 상세 정보 확인 (더블클릭)
  - 전체 선택/해제 빠른 작업

- **🎨 새로운 로비 UI**
  - 카드 기반 메뉴 시스템
  - 계좌 현황, 덱 관리, 거래 내역, 가이드 빠른 접근
  - 직관적인 정보 표시 및 시각적 피드백

---

## 📖 이전 수정 사항 (v6.0)

### ✨ 피로도 시스템 (NEW!)
- ⚠️ 덱이 비었을 때 카드 드로우 시 피로도 발동
- 피로도 1 → 2 → 3 → 4... 순차적으로 증가
- 피로도 수치만큼 자신에게 피해
- 싱글/PvP 모두 적용
- UI에 피로도 카운터 실시간 표시

### ✅ PvP 턴 관리 개선
- **턴 시작**: 에너지 +1, 카드 드로우 +1 (본인만)
- **턴 종료**: 상대에게 턴만 넘김 (드로우/에너지 없음)
- 중복 드로우 버그 수정

### ✅ PvP 승패 판정 수정
- 패배자에게만 오픈뱅킹 팝업 표시
- 승리/패배 정확한 판정
- 실시간 상태 동기화 개선

### ✅ 신한은행 신규 가입 시스템
- 통장 4종 선택 가능
- 카드 5종 선택 가능
- 적금 4종 선택 가능
- 신규 회원 스타터 덱 30장 자동 지급

### ✅ PVP 패배 역전 시스템
- 패배 시 오픈뱅킹 팝업
- 신한은행 특화 4가지 옵션
- 밸런스 조정된 히든 카드

### ✅ 히든 카드: 신한 금융의 힘
- 코스트 4 | 공격 8 | 방어 3
- 8 피해 + 5 회복 + 3 실드 + 에너지 +2
- 강력하지만 밸런스 유지

---

## 🎮 PvP 작동 방식

### 상대를 직접 공격!

```
플레이어 A:
  - 카드 사용 → bossHp 감소 (상대 = 보스)
  - 자동 전송 → 상대에게 bossHp 값 전달
  
플레이어 B:
  - 수신 → bossHp를 내 playerHp로 설정
  - 화면 하단 HP 감소 ✅
```

### 닉네임 표시

- 상단: 상대 닉네임 (예: "플레이어B")
- 하단: 내 이름 (예: "이태영")

---

## 📋 테스트 체크리스트

### 기본

- [ ] `npm run dev:full` 실행
- [ ] `http://localhost:5173` 접속
- [ ] F12 → Console (에러 없어야 함!)

### 신규 가입

- [ ] "신규 고객입니다" 클릭
- [ ] 신한은행 상품 3종 선택
- [ ] 계좌 개설 완료
- [ ] 스타터 덱 30장 지급 확인

### 로비 - 계좌 현황 (v8.0 업데이트!)

- [ ] 로비에서 "계좌 현황" 카드 클릭
- [ ] **신한금융그룹 거래 상품** 섹션 확인
- [ ] **오픈뱅킹 연동 상품** 섹션 확인 (타 금융사)
- [ ] 타입별 상품 (예금/카드/투자 등) 상세 정보
- [ ] 총 보유 자산 및 금융사별 자산 표시 확인

### 로비 - 카드 상점 (NEW!)

- [ ] 로비에서 "카드 상점" 카드 클릭
- [ ] 카테고리 필터 동작 확인
- [ ] 신한금융그룹 전용 상품 🔒 표시 확인
- [ ] 상품 클릭하여 상세 정보 모달 확인
- [ ] 카드 미리보기 기능 확인
- [ ] "구매하기" 버튼으로 카드 획득
- [ ] 중복 구매 방지 (✅ 구매완료 표시)
- [ ] 구매한 카드가 덱에 자동 추가되는지 확인

### 로비 - 카드 덱 관리 (NEW!)

- [ ] 로비에서 "카드 덱 관리" 카드 클릭
- [ ] 보유 카드 목록 표시 확인
- [ ] 카테고리 필터 동작 확인
- [ ] 카드 클릭하여 선택/해제 (✓ 표시)
- [ ] 30장 선택 후 추가 선택 시 경고 메시지
- [ ] 30장 초과 시 "덱이 가득참" 표시
- [ ] 더블클릭으로 카드 상세 보기
- [ ] "덱 적용" 버튼으로 저장
- [ ] 로비로 돌아가서 "전투 덱" 정보 확인

### 싱글 플레이

- [ ] Guest로 시작 또는 커스텀 덱 설정
- [ ] 카드 사용 → 보스 HP 감소
- [ ] 선택한 덱의 카드들만 사용 가능
- [ ] 덱이 30장 이하인지 확인

### PvP

- [ ] 방 생성/참가
- [ ] 상대 닉네임 표시 ✅
- [ ] 커스텀 덱으로 전투 가능
- [ ] A 공격 → B HP 감소 ✅
- [ ] B 공격 → A HP 감소 ✅

### PvP 패배 후 역전

- [ ] 패배 → "신한은행 추가 상품" 버튼
- [ ] 오픈뱅킹 팝업 (4가지 옵션)
- [ ] 히든 카드 획득: "신한 금융의 힘"
- [ ] 재도전 → 히든 카드 사용 → 역전!

---

## 💾 Git 백업 & 배포

### 1️⃣ Git 커밋

```powershell
# 변경사항 추가
git add .

# 커밋
git commit -m "feat: v8.0 신한금융 중심 시스템 완성"

# GitHub에 푸시
git push origin main
```

### 2️⃣ Vercel 배포 설정

#### Vercel 웹사이트에서:

1. **Import Git Repository**
   - GitHub 저장소 선택

2. **Framework Preset 설정**
   ```
   Framework Preset: Vite ✅
   ```

3. **Build & Output Settings** (자동 감지됨)
   ```
   Build Command: npm run build
   Output Directory: dist
   Install Command: npm install
   ```

4. **환경 변수** (선택사항)
   ```
   VITE_SOCKET_URL=http://localhost:3002
   ```
   (멀티플레이 사용 시 백엔드 URL 설정)

5. **Deploy 버튼 클릭!** 🚀

### 3️⃣ 배포 후 확인

```
배포 완료 URL: https://your-project.vercel.app
  ↓
싱글 플레이: ✅ 정상 작동
멀티플레이(PvP): ⚠️ 백엔드 필요
```

### 4️⃣ 멀티플레이 활성화 (선택사항)

백엔드 서버를 별도 배포해야 합니다:

**📖 상세 배포 가이드:** [`DEPLOYMENT.md`](./DEPLOYMENT.md) 참조

**빠른 시작 (Railway):**

1. [Railway.app](https://railway.app) 접속 → GitHub 로그인
2. **New Project** → **Deploy from GitHub repo**
3. 환경 변수 설정:
   ```env
   NODE_ENV=production
   ALLOWED_ORIGINS=https://your-frontend.vercel.app
   ```
4. 배포 완료 후 URL 확인 (예: `https://xxx.up.railway.app`)
5. Vercel 환경 변수 추가:
   ```env
   VITE_SOCKET_URL=https://xxx.up.railway.app
   ```

**추천 플랫폼:**
- ⭐ **Railway** - 가장 간단, 무료 $5 크레딧/월
- Render - 무료 티어 (15분 비활성 시 슬리핑)
- Fly.io - 무료 티어

---

## 🔧 문제 해결

### React Hooks 에러

```powershell
taskkill /IM node.exe /F
npm run dev:full
```

### 포트 충돌

```powershell
netstat -ano | findstr :3002
taskkill /PID [번호] /F
```

---

## 🎊 완성!

**모든 기능이 완벽하게 작동합니다!**

```
http://localhost:5173
```

**F12 콘솔을 열고 테스트하세요!** 📊✨
